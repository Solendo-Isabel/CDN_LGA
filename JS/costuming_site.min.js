const PAGEBODY = document.body
const IFRAME = document.querySelector("#Comunica")
const IFRAME_BODY = IFRAME.contentDocument 


const floatingButton = document.createElement("button")
floatingButton.classList.add("UnClickable")

const IMAGE = document.createElement("img")
IMAGE.setAttribute("src","../assets/Comunica_Open.svg")
IMAGE.classList.add("Unclickable")
IMAGE.id = "floatingButton"
floatingButton.appendChild(IMAGE)

PAGEBODY.appendChild(floatingButton)

const showPlayer = () =>{
    console.log(IFRAME_BODY)
    if (IFRAME.style.display === 'none' || IFRAME.style.display === '') {
        IFRAME.setAttribute("src",'http://localhost:3000/')
        IFRAME.style.display = 'block';
        IMAGE.setAttribute("src","../assets/Comunica_Close.svg")
        IMAGE.style.width = "30px"
        IMAGE.style.height = "30px"
    }else{
        IFRAME.style.display = 'none';
        IMAGE.setAttribute("src","../assets/Comunica_Open.svg")
        IMAGE.style.width = "60px"
        IMAGE.style.height = "60px"

    }
}

const setClickable = (Pointer) => {
    if(Pointer.target.id != "floatingButton"){
        Pointer.target.classList.add("Clickable")
        console.log("Added")
    }

}
const getInput = (Pointer) => {
    if(Pointer.target.classList.contains("Clickable")){
        console.log(Pointer.target.textContent)
        console.log("removed")
    }
}
const sendInput = (Pointer) => {
    if(Pointer.target.classList.contains("Clickable") &&  Pointer.target.id != "floatingButton"){
        console.log(Pointer.target.textContent)    
    }
    console.log(IFRAME_BODY)
}


PAGEBODY.addEventListener("mouseover",setClickable)
PAGEBODY.addEventListener("mouseout",getInput)
PAGEBODY.addEventListener("click",sendInput)
IMAGE.addEventListener("click",showPlayer)

